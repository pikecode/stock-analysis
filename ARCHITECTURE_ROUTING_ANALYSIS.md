# ğŸ—ï¸ è·¯ç”±æ¶æ„åˆ†æï¼šå®¢æˆ·ç«¯ vs ç®¡ç†ç«¯éš”ç¦»

## ç°çŠ¶åˆ†æ

### å½“å‰æ¶æ„ï¼ˆæƒé™æ£€æŸ¥æ¨¡å¼ï¼‰

```
å•ä¸€å‰ç«¯åº”ç”¨ (http://localhost:3000)
â”œâ”€â”€ å…±äº«è·¯ç”±å’Œå¯¼èˆª
â”œâ”€â”€ æƒé™æ£€æŸ¥åœ¨è·¯ç”±å®ˆå«ä¸­è¿›è¡Œ
â””â”€â”€ èœå•é€šè¿‡ v-if æ¡ä»¶æ˜¾ç¤º

æ‰€æœ‰ç”¨æˆ·è®¿é—®åŒä¸€å¥—è·¯ç”±ï¼š
â”œâ”€â”€ /stocks          â†’ âœ… All users
â”œâ”€â”€ /concepts        â†’ âœ… All users
â”œâ”€â”€ /rankings        â†’ âœ… All users
â”œâ”€â”€ /import          â†’ âœ… Admin onlyï¼ˆæƒé™æ£€æŸ¥ï¼‰
â””â”€â”€ /reports         â†’ âœ… Customer onlyï¼ˆæƒé™æ£€æŸ¥ï¼‰
```

**ç‰¹ç‚¹**ï¼š
- âŒ è·¯ç”±ä¸éš”ç¦»ï¼Œåªæ˜¯æƒé™æ£€æŸ¥éšè—
- âŒ æ‰€æœ‰è·¯ç”±éƒ½åŠ è½½åœ¨åŒä¸€ä¸ªåº”ç”¨ä¸­
- âŒ Admin ç”¨æˆ·ä¹ŸåŠ è½½æŠ¥è¡¨ç»„ä»¶ï¼ˆè™½ç„¶çœ‹ä¸åˆ°ï¼‰
- âŒ Customer ç”¨æˆ·ä¹ŸåŠ è½½å¯¼å…¥ç»„ä»¶ï¼ˆè™½ç„¶çœ‹ä¸åˆ°ï¼‰
- âœ… ç®€å•å¿«é€Ÿ
- âœ… ä»£ç æ˜“äºç»´æŠ¤

---

## æ”¹è¿›æ–¹æ¡ˆå¯¹æ¯”

### æ–¹æ¡ˆ Aï¼šè·¯ç”±åˆ†ç»„éš”ç¦»ï¼ˆæ¨èï¼‰

```
å•ä¸€å‰ç«¯åº”ç”¨
â”œâ”€â”€ /admin/
â”‚   â”œâ”€â”€ /stocks          - è‚¡ç¥¨ç®¡ç†
â”‚   â”œâ”€â”€ /concepts        - æ¦‚å¿µç®¡ç†
â”‚   â”œâ”€â”€ /rankings        - æ’åæŸ¥è¯¢
â”‚   â”œâ”€â”€ /import          - æ•°æ®å¯¼å…¥
â”‚   â””â”€â”€ /import/batches  - å¯¼å…¥è®°å½•
â”‚
â”œâ”€â”€ /client/
â”‚   â”œâ”€â”€ /stocks          - è‚¡ç¥¨æŸ¥è¯¢ï¼ˆç®€åŒ–ç‰ˆï¼‰
â”‚   â”œâ”€â”€ /concepts        - æ¦‚å¿µæŸ¥è¯¢ï¼ˆç®€åŒ–ç‰ˆï¼‰
â”‚   â”œâ”€â”€ /rankings        - æ’åæŸ¥è¯¢ï¼ˆç®€åŒ–ç‰ˆï¼‰
â”‚   â”œâ”€â”€ /reports         - æŠ¥è¡¨æ€»è§ˆ
â”‚   â”œâ”€â”€ /reports/concept-ranking
â”‚   â”œâ”€â”€ /reports/stock-trend
â”‚   â””â”€â”€ /reports/top-n
â”‚
â””â”€â”€ /ï¼ˆå…±äº«ï¼‰
    â”œâ”€â”€ /login
    â”œâ”€â”€ /settingsï¼ˆç”¨æˆ·è®¾ç½®ï¼‰
    â””â”€â”€ /profileï¼ˆç”¨æˆ·ä¿¡æ¯ï¼‰
```

**è·¯ç”±ä»£ç ç¤ºä¾‹**ï¼š
```typescript
const routes = [
  {
    path: '/admin',
    component: AdminLayout,
    meta: { requiredRole: 'admin' },
    children: [
      { path: 'stocks', component: StockManagement },
      { path: 'import', component: ImportView },
      // ... admin routes
    ]
  },
  {
    path: '/client',
    component: ClientLayout,
    meta: { requiredRole: 'customer' },
    children: [
      { path: 'reports', component: ReportsHub },
      { path: 'reports/concept-ranking', component: ConceptRanking },
      // ... client routes
    ]
  },
  {
    path: '/login',
    component: LoginView,
    meta: { requiresAuth: false }
  }
]
```

**ä¼˜ç‚¹** âœ…ï¼š
- âœ… è·¯ç”±æ¸…æ™°éš”ç¦»
- âœ… ä¸åŒçš„å¸ƒå±€å’Œå¯¼èˆª
- âœ… ä»£ç ç»„ç»‡æ›´æ¸…æ™°
- âœ… ä¸åŒçš„ç»„ä»¶ä¸ä¼šäº’ç›¸æ··åˆ
- âœ… æ€§èƒ½æ›´å¥½ï¼ˆæŒ‰éœ€åŠ è½½ï¼‰
- âœ… æ˜“äºæ‰©å±•æ–°è§’è‰²

**ç¼ºç‚¹** âŒï¼š
- âŒ éœ€è¦ä¸¤ä¸ªç‹¬ç«‹çš„ Layout ç»„ä»¶
- âŒ å…±äº«ç»„ä»¶éœ€è¦ç®¡ç†

**å·¥ä½œé‡**ï¼š1-2 å¤©

---

### æ–¹æ¡ˆ Bï¼šå®Œå…¨åˆ†ç¦»åº”ç”¨ï¼ˆæç«¯éš”ç¦»ï¼‰

```
ä¸¤ä¸ªç‹¬ç«‹çš„å‰ç«¯åº”ç”¨

åå°ç®¡ç†åº”ç”¨ï¼ˆadminï¼‰        å®¢æˆ·ç«¯åº”ç”¨ï¼ˆclientï¼‰
â”œâ”€â”€ é¡¹ç›®ï¼šadmin-frontend       â”œâ”€â”€ é¡¹ç›®ï¼šclient-frontend
â”œâ”€â”€ URLï¼š/admin/               â”œâ”€â”€ URLï¼š/client/
â”œâ”€â”€ è·¯ç”±ï¼šstocks, import       â”œâ”€â”€ è·¯ç”±ï¼šreports, queries
â””â”€â”€ éƒ¨ç½²ï¼šç‹¬ç«‹æœåŠ¡å™¨           â””â”€â”€ éƒ¨ç½²ï¼šç‹¬ç«‹æœåŠ¡å™¨
```

**ä¼˜ç‚¹** âœ…ï¼š
- âœ… å®Œå…¨éš”ç¦»ï¼Œäº’ä¸å½±å“
- âœ… ç‹¬ç«‹å¼€å‘ã€éƒ¨ç½²
- âœ… å¯ç”¨ä¸åŒæŠ€æœ¯æ ˆ
- âœ… æ˜“äºå›¢é˜Ÿåä½œ

**ç¼ºç‚¹** âŒï¼š
- âŒ ä»£ç é‡å¤ï¼ˆè®¤è¯ã€API è°ƒç”¨ç­‰ï¼‰
- âŒ ç»´æŠ¤å¤æ‚ï¼ˆä¸¤ä¸ª package.json, ä¸¤å¥—æ„å»ºï¼‰
- âŒ å…±äº«ä»£ç ç®¡ç†å›°éš¾
- âŒ éƒ¨ç½²å’Œè¿ç»´å¤æ‚

**å·¥ä½œé‡**ï¼š3-5 å¤©

---

### æ–¹æ¡ˆ Cï¼šåŠ¨æ€è·¯ç”±åŠ è½½ï¼ˆé«˜çº§ï¼‰

```
æ ¹æ®ç”¨æˆ·è§’è‰²åŠ¨æ€åŠ è½½ä¸åŒçš„è·¯ç”±æ¨¡å—

ç”¨æˆ·ç™»å½•
    â†“
è·å–è§’è‰²å’Œæƒé™
    â†“
åŠ¨æ€æ³¨å†Œå¯¹åº”çš„è·¯ç”±æ¨¡å—
    â†“
åŠ è½½å¯¹åº”çš„ Layout å’Œç»„ä»¶
```

**ä»£ç ç¤ºä¾‹**ï¼š
```typescript
// åœ¨ auth store ä¸­
async function initializeRoutes() {
  const user = await fetchUser()

  if (user.hasRole('admin')) {
    router.addRoutes(adminRoutes)
  } else if (user.hasRole('customer')) {
    router.addRoutes(clientRoutes)
  }
}
```

**ä¼˜ç‚¹** âœ…ï¼š
- âœ… è¶…çº§çµæ´»
- âœ… æ€§èƒ½æœ€ä¼˜ï¼ˆåªåŠ è½½éœ€è¦çš„è·¯ç”±ï¼‰
- âœ… æ˜“äºæ·»åŠ æ–°è§’è‰²

**ç¼ºç‚¹** âŒï¼š
- âŒ å®ç°å¤æ‚
- âŒ è°ƒè¯•å›°éš¾
- âŒ éœ€è¦ç‰¹æ®Šå¤„ç†

**å·¥ä½œé‡**ï¼š2-3 å¤©

---

## å¯¹æ¯”è¡¨

| ç»´åº¦ | å½“å‰ï¼ˆæƒé™æ£€æŸ¥ï¼‰ | æ–¹æ¡ˆ Aï¼ˆè·¯ç”±åˆ†ç»„ï¼‰ | æ–¹æ¡ˆ Bï¼ˆå®Œå…¨åˆ†ç¦»ï¼‰ | æ–¹æ¡ˆ Cï¼ˆåŠ¨æ€åŠ è½½ï¼‰ |
|------|-----------------|------------------|------------------|-----------------|
| è·¯ç”±éš”ç¦» | âŒ å¦ | âœ… æ˜¯ | âœ…âœ… å®Œå…¨éš”ç¦» | âœ… æ˜¯ |
| ä»£ç å¤æ‚åº¦ | ä½ | ä¸­ | é«˜ | é«˜ |
| éƒ¨ç½²å¤æ‚åº¦ | ç®€å• | ç®€å• | å¤æ‚ | ç®€å• |
| æ€§èƒ½ | ä¸­ç­‰ | å¥½ | å¥½ | æœ€å¥½ |
| ç»´æŠ¤æˆæœ¬ | ä½ | ä½ | é«˜ | ä¸­ |
| å®ç°å·¥ä½œé‡ | å·²å®Œæˆ | 1-2 å¤© | 3-5 å¤© | 2-3 å¤© |
| é€‚åˆåœºæ™¯ | å°å‹ç³»ç»Ÿ | **ä¸­å‹ç³»ç»Ÿ** | å¤§å‹ä¼ä¸š | å¤æ‚æƒé™ç³»ç»Ÿ |

---

## æ¨èæ–¹æ¡ˆï¼šæ–¹æ¡ˆ Aï¼ˆè·¯ç”±åˆ†ç»„éš”ç¦»ï¼‰

### åŸå› 

1. **æœ€ä½³å¹³è¡¡**
   - è·¯ç”±æ¸…æ™°éš”ç¦»ï¼ˆæ»¡è¶³æ‚¨çš„éœ€æ±‚ï¼‰
   - å®ç°ç®€å•ï¼ˆæ”¹é€ æˆæœ¬ä½ï¼‰
   - ç»´æŠ¤æ˜“ï¼ˆå•ä¸ªåº”ç”¨ï¼‰

2. **æ»¡è¶³éœ€æ±‚**
   - Admin å’Œ Customer è·¯ç”±å®Œå…¨åˆ†ç¦»
   - ä¸åŒçš„ Layout å’Œå¯¼èˆª
   - æ¸…æ™°çš„åº”ç”¨æµç¨‹

3. **æ˜“äºæ‰©å±•**
   - åç»­æ·»åŠ æ–°è§’è‰²åªéœ€æ·»åŠ æ–°è·¯ç”±åˆ†ç»„
   - å¯å‡çº§åˆ°æ–¹æ¡ˆ C æˆ– B

### å®æ–½æ­¥éª¤

#### Step 1ï¼šé‡ç»„è·¯ç”±ç»“æ„
```
å½“å‰ï¼š
/stocks, /concepts, /rankings, /import, /reports

æ”¹ä¸ºï¼š
/admin/stocks, /admin/import, /admin/import/batches
/client/stocks, /client/reports, /client/reports/concept-ranking
```

#### Step 2ï¼šåˆ›å»ºä¸¤ä¸ªç‹¬ç«‹çš„ Layout
```
AdminLayout.vue     â†’ ç®¡ç†å‘˜ä¸“ç”¨å¯¼èˆª
  â”œâ”€â”€ è‚¡ç¥¨ç®¡ç†
  â”œâ”€â”€ å¯¼å…¥ç®¡ç†
  â””â”€â”€ è®¾ç½®

ClientLayout.vue    â†’ å®¢æˆ·ç«¯ä¸“ç”¨å¯¼èˆª
  â”œâ”€â”€ è‚¡ç¥¨æŸ¥è¯¢
  â”œâ”€â”€ æŠ¥è¡¨
  â””â”€â”€ è®¾ç½®
```

#### Step 3ï¼šè·¯ç”±ä¿æŠ¤åœ¨é¡¶çº§
```typescript
{
  path: '/admin',
  meta: { requiredRole: 'admin' },
  component: AdminLayout,
  children: [...]
},
{
  path: '/client',
  meta: { requiredRole: 'customer' },
  component: ClientLayout,
  children: [...]
}
```

---

## å½“å‰æ¶æ„çš„ä¸è¶³

### ç°åœ¨çš„é—®é¢˜

1. **è·¯ç”±ä¸éš”ç¦»**
   - `/import` å’Œ `/reports` åœ¨åŒä¸€çº§åˆ«
   - Admin ç”¨æˆ·ä¼šçœ‹åˆ°æŠ¥è¡¨è·¯ç”±ï¼ˆè™½ç„¶è®¿é—®æ—¶è¢«é˜»æ­¢ï¼‰
   - Customer ç”¨æˆ·ä¼šçœ‹åˆ°å¯¼å…¥è·¯ç”±ï¼ˆè™½ç„¶è®¿é—®æ—¶è¢«é˜»æ­¢ï¼‰

2. **Layout æ··ä¹±**
   - æ‰€æœ‰ç”¨æˆ·å…±äº«ä¸€ä¸ª Layoutï¼ˆMainLayoutï¼‰
   - ä¸åŒè§’è‰²åº”è¯¥æœ‰ä¸åŒçš„å¯¼èˆªä½“éªŒ

3. **ç»„ä»¶åŠ è½½**
   - æ‰€æœ‰ç»„ä»¶éƒ½è¢«åŠ è½½åˆ°åº”ç”¨ä¸­
   - æµªè´¹å‰ç«¯èµ„æº

4. **å¯¼èˆªä¸æ¸…æ™°**
   ```
   ç°åœ¨çš„å¯¼èˆªç»“æ„ï¼š
   - è‚¡ç¥¨åˆ—è¡¨ (All)
   - æ¦‚å¿µåˆ—è¡¨ (All)
   - æ’åæŸ¥è¯¢ (All)
   - [å¦‚æœæ˜¯ Admin] æ•°æ®å¯¼å…¥
   - [å¦‚æœæ˜¯ Customer] æŠ¥è¡¨  â† ä½ç½®ä¸æ¸…æ™°
   ```

---

## æ”¹è¿›åçš„æ¶æ„ï¼ˆæ–¹æ¡ˆ Aï¼‰

```
Admin ç”¨æˆ·ï¼š
  http://localhost:3000/admin
  â”œâ”€â”€ è‚¡ç¥¨ç®¡ç†
  â”œâ”€â”€ æ¦‚å¿µç®¡ç†
  â”œâ”€â”€ æ’åæŸ¥è¯¢
  â”œâ”€â”€ æ•°æ®å¯¼å…¥
  â”‚   â””â”€â”€ å¯¼å…¥è®°å½•
  â””â”€â”€ è®¾ç½®

Customer ç”¨æˆ·ï¼š
  http://localhost:3000/client
  â”œâ”€â”€ è‚¡ç¥¨æŸ¥è¯¢
  â”œâ”€â”€ æ¦‚å¿µæŸ¥è¯¢
  â”œâ”€â”€ æ’åæŸ¥è¯¢
  â”œâ”€â”€ ğŸ“Š æŠ¥è¡¨
  â”‚   â”œâ”€â”€ æ€»è§ˆ
  â”‚   â”œâ”€â”€ æ¦‚å¿µæ’å
  â”‚   â”œâ”€â”€ è‚¡ç¥¨è¶‹åŠ¿
  â”‚   â””â”€â”€ Top N åˆ†æ
  â””â”€â”€ è®¾ç½®

Login è·¯ç”±ï¼ˆéƒ½å¯è®¿é—®ï¼‰ï¼š
  http://localhost:3000/login
```

---

## å®æ–½è®¡åˆ’

### 1. åˆ›å»º AdminLayoutï¼ˆ0.5 å¤©ï¼‰
```vue
<template>
  <el-container>
    <el-aside class="admin-sidebar">
      <!-- Admin ä¸“ç”¨å¯¼èˆª -->
      <el-menu>
        <el-menu-item index="/admin/stocks">è‚¡ç¥¨ç®¡ç†</el-menu-item>
        <el-menu-item index="/admin/import">æ•°æ®å¯¼å…¥</el-menu-item>
        <el-menu-item index="/admin/settings">è®¾ç½®</el-menu-item>
      </el-menu>
    </el-aside>
    <router-view />
  </el-container>
</template>
```

### 2. åˆ›å»º ClientLayoutï¼ˆ0.5 å¤©ï¼‰
```vue
<template>
  <el-container>
    <el-aside class="client-sidebar">
      <!-- Customer ä¸“ç”¨å¯¼èˆª -->
      <el-menu>
        <el-menu-item index="/client/stocks">è‚¡ç¥¨æŸ¥è¯¢</el-menu-item>
        <el-menu-item index="/client/reports">æŠ¥è¡¨</el-menu-item>
        <el-menu-item index="/client/settings">è®¾ç½®</el-menu-item>
      </el-menu>
    </el-aside>
    <router-view />
  </el-container>
</template>
```

### 3. é‡ç»„è·¯ç”±ï¼ˆ0.5 å¤©ï¼‰
```typescript
const adminRoutes = [
  { path: 'stocks', component: StockManagement },
  { path: 'import', component: ImportView },
  { path: 'settings', component: Settings }
]

const clientRoutes = [
  { path: 'stocks', component: StockQuery },
  { path: 'reports', component: ReportsHub },
  { path: 'reports/concept-ranking', component: ConceptRanking },
  { path: 'settings', component: Settings }
]

const routes = [
  {
    path: '/admin',
    component: AdminLayout,
    meta: { requiredRole: 'admin' },
    children: adminRoutes
  },
  {
    path: '/client',
    component: ClientLayout,
    meta: { requiredRole: 'customer' },
    children: clientRoutes
  },
  { path: '/login', component: Login }
]
```

### 4. ä¿®æ”¹ç™»å½•åå¯¼å‘ï¼ˆ0.5 å¤©ï¼‰
```typescript
async function handleLoginSuccess() {
  const user = await fetchUser()

  if (user.isAdmin) {
    router.push('/admin/stocks')
  } else if (user.isCustomer) {
    router.push('/client/reports')
  }
}
```

**æ€»å·¥ä½œé‡**ï¼š2 å¤©

---

## å»ºè®®

### ç°åœ¨çš„é€‰æ‹©

1. **ä¿æŒç°çŠ¶** â†’ ç»§ç»­æŠ¥è¡¨å¼€å‘
   - å¿«é€Ÿï¼Œå¯ç”¨
   - æ¶æ„ä¸æ˜¯æœ€ä¼˜

2. **æ”¹è¿›åˆ°æ–¹æ¡ˆ A** â†’ èŠ± 2 å¤©é‡ç»„è·¯ç”±
   - æ¶æ„æ›´æ¸…æ™°
   - ç”¨æˆ·ä½“éªŒæ›´å¥½
   - ä»£ç æ›´æ˜“ç»´æŠ¤

3. **æç«¯æ–¹æ¡ˆ B** â†’ ä¸¤ä¸ªå®Œå…¨åˆ†ç¦»çš„åº”ç”¨
   - ä¸æ¨èï¼ˆå¤ªå¤æ‚ï¼‰

### æˆ‘çš„å»ºè®®

**å…ˆå®ŒæˆæŠ¥è¡¨å¼€å‘ï¼ˆå½“å‰æ¶æ„ï¼‰ï¼Œç„¶åå†å‡çº§åˆ°æ–¹æ¡ˆ A**

åŸå› ï¼š
- âœ… å¿«é€ŸéªŒè¯åŠŸèƒ½
- âœ… è·å¾—ç”¨æˆ·åé¦ˆ
- âœ… ç„¶åä¼˜åŒ–æ¶æ„

æˆ–è€…

**ç°åœ¨å°±æ”¹åˆ°æ–¹æ¡ˆ Aï¼Œç„¶åå¼€å‘æŠ¥è¡¨**

åŸå› ï¼š
- âœ… æ¶æ„æ¸…æ™°
- âœ… é•¿æœŸç»´æŠ¤æ›´å¥½
- âœ… åç»­æ‰©å±•å®¹æ˜“

---

## æ€»ç»“

| é—®é¢˜ | ç­”æ¡ˆ |
|------|------|
| å½“å‰è·¯ç”±æ˜¯å¦éš”ç¦»ï¼Ÿ | âŒ å¦ï¼Œåªæ˜¯æƒé™æ£€æŸ¥ |
| æ˜¯å¦éœ€è¦æ”¹è¿›ï¼Ÿ | âœ… æ˜¯ï¼Œæ–¹æ¡ˆ A æœ€å¥½ |
| æ”¹è¿›æˆæœ¬ï¼Ÿ | ğŸ’° 2 å¤© |
| ä½•æ—¶æ”¹è¿›ï¼Ÿ | ç°åœ¨æˆ–æŠ¥è¡¨å¼€å‘å |

---

**æ‚¨å€¾å‘äºå“ªä¸ªæ–¹æ¡ˆï¼Ÿ**
